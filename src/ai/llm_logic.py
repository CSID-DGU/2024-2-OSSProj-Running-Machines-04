# all course data
course_data = [
    "경복궁_시계방향[2.6km]",
    "한강안쪽 500m 직선도로",
    "Cycling trail to COEX",
    "칼코스-아라달",
    "0.9 km Run Segment in Noryangjin 2(i)-dong, Seoul, South Korea on Strava",
    "아라뱃길 진입",
    "Outside SORI park",
    "2017중마",
    "헌법재판소 - 경복궁사거리 동십자각",
    "난지천공원 짱구트랙 10바퀴",
    "Orange Bridge to bike bridge",
    "성내천",
    "Around Seoul Olympic Park",
    "영동대교-탄천합수부",
    "석촌호수 런닝코스",
    "굴포천 삼산2교~아라뱃길 10km",
    "성내천_그늘길(풍납중->합수부)",
    "Han River Bridge Island half lap",
    "Insadong-gil",
    "JIN.K 한체대 TRACK LAB",
    "샛강생태공원(E2W)",
    "월드컵성산대교길",
    "Sindorim to Omokgyo Bridge",
    "Bogwang Tunnel to Jamsu Bridge",
    "사천교~홍제천 합수부 왕복(5.0km)",
    "롯데은평몰 도로방향 200m 쥐어짜기 구간_DDRC crew",
    "하남종합운동장 5회전 by MCC",
    "효자로 남행 Hyoja-ro Southbound",
    "Gwangmyeong Athletics track",
    "0.1 km Run Segment in Seoul, South Korea on Strava",
    "Back Straight - Finish",
    "Seoul Flyers 10k Loop",
    "중랑천 우안 상행(신곡교-부용교) by 마부작침",
    "Gate to Banpo",
    "Dirt Track Lap",
    "Hangang Br(West)",
    "상수역-광흥창역",
    "서울대트랙",
    "TRB산러너-관악산-제1국기봉전망대-정상-버티컬",
    "아디다스마이런서울초반구간",
    "0.1 km Run Segment in Seoul, South Korea on Strava",
    "2XU React Challenge",
    "고척근린공원-러닝트랙",
    "[hirun]망원유수지 트랙",
    "양화한강공원에서 성산대교 새로운 길",
    "North end of Gwanghuamun to Yi Sun-shin statue sprint",
    "Counter clockwise lap around track next helipad",
    "잠실대교>천호대교",
    "[경의선숲길] 대흥역-홍대입구역",
    "THE NIKE MILE",
    "[얼공]1k후문→분수대(북)_@ddamdo",
    "Ewha track CCW",
    "올림픽공원파틀렉",
    "Deoksugung wall run",
    "Dongjak Sprint Finish",
    "Banpo to Dongjak",
    "Seoul Korea Park Run",
    "잠원트랙-동작대교",
    "서울식물원(CCW#01)",
    "Banpo to Hannam 1Mile",
    "Seoul Canal to Han River",
    "응봉공원 loop",
    "Back to Almoni",
    "파리공원",
    "Southside of Yeoui Island (East Bound)",
    "원효대교 (남쪽)",
    "양재천 3.7km",
    "Yeouido Loop South - Downstream",
    "Banpo(S) to Hangang(S)",
    "교대 트렉 1바퀴",
    "서울숲마라톤클럽 4-4코스(0.41km)",
    "Hannam Triangle Exit to Banpo",
    "둘리 VS 고길동",
    "KR-Seoul: Yangjae Stream: Downstream-Upstream 5km",
    "효창운동장트랙",
    "NBR277 C코스",
    "삼성교-탄천2교 by 마부작침",
    "4.8 km Run Segment in Seoul, South Korea on Strava",
    "2단 업힐 구간 주야페",
    "Bridge over Itaewon Blvd (northbound)",
    "진옥자전거캠프-북한산둘레길(망월사입구-다락원)(JOBC)",
    "JoongAng Marathon Suseo Stn to Jagok Jct",
    "2.5k 스프린트",
    "국회트랙1km",
    "200m lap",
    "Via Elvis Museum",
    "서서울호수공원 몬드리안A",
    "중랑천 우안(호장교-호암교) by 마부작침",
    "2014 Nike We Run SEOUL 10k",
    "과기대트랙",
    "Home Straight - Start",
    "상암구름다리",
    "Yonsei track lap",
    "방화근린공원0.76km",
    "TRB - 송파소리길",
    "Cheongnim Harmony Path",
    "만남의광장 에서 족구장까지 업힐 JS1",
    "63 Building > 한강철교",
    "cheonggyecheon mile",
    "R 보라매공원 1바퀴 0.6Km",
    "휴레 우장산TR A코스",
    "고려대 녹지 운동장 1LAP",
    "School climb",
    "Hongje to Waterfall",
    "Cheonggae Plaza to Cheonggae 3-ga",
    "Haebangchon",
    "문래공원",
    "잠실보조운동장 400m",
    "Bukhansan Trail #20 / 북한산 둘레길 20코스 / Bukhansan Trail #20",
    "오금교-고척교",
    "동작대교 (남>북)",
    "한남동 산10 139 Climb",
    "tree alley",
    "진옥자전거캠프-청계산(청계산역-진달래능선입구)(JOBC)",
    "TRB - 고구려정입구 아차산 버티컬",
    "관악산둘레길_3구간_러너킹_산러너",
    "과기대 200m 업힐 @ddamdo",
    "산성tr1",
    "반포4동 49 6 Climb",
    "응봉공원 내부 트랙",
    "Danjak evergreen decent",
    "영롱이 3번 트랙",
    "Dorim Reservior Track",
    "잠실종합운동장 트랙",
    "서울둘레길 환종주 FKT",
    "[바나나스포츠] 올공 만남의 광장 트랙",
    "대치유수지체육공원",
    "Jonggak to Anguk",
    "Wonhyo2Mapo",
    "Namsan Loop from National Theater",
    "서울둘레산100마일_7구간",
    "끝난줄 알았는데 또있네 업힐 700m",
    "탄천2교~올림픽대로(RUN)",
    "Gugchigil climb",
    "봉산-앵봉산 (증산중-보덕사)",
    "독립문공원 한바퀴",
    "우장산C코스",
    "sinnonhyeon hill",
    "올공크로스컨트리[TeamNBx]",
    "숭실대뺑뺑이",
    "진관동 산172 Climb",
    "평창동 404 Climb",
    "(Official) Sinbanpo Track 5K - Outside 10 Lap",
    "불광천입구월드컵대교길",
    "휴레 우장산TR B코스 900m",
    "부암동 359 10 Climb",
    "서울둘레길 2코스",
    "[Tom's] Buam-dong to Palgakjeong",
    "오들로28k",
    "[휴레] 남산TR Part 1",
    "Bukhansan Trail #8(NEW) / 북한산 둘레길 8코스 / Bukhansan Trail #8(NEW)",
    "Gangnam Style Run",
    "녹번동 산1 33 Climb",
    "진옥자전거캠프-불암.수락(백세문-불암-수락산)(JOBC)",
    "Yangyeonggyo - Yanghwagyo",
    "업힐지옥[TeamNBx]",
    "진옥자전거캠프-아차산(생태공원구간)(JOBC)",
    "Seoul Trail Course #5 Segment 3 (SNU to Seoksu)",
    "역삼2동 725 22 Climb",
    "Yeouido Riverfront Mile",
    "Seoul Trail Course #5 Segment 1 (Gwaneumsa to Naseongdae)",
    "용산동2가 산1 3 Climb",
    "KOREA FKT_2019_02_북한원효",
    "장충동 산5 15 Climb",
    "Namdaemun to the top of Bugaksan",
    "TRB - 남2문 장미광장",
    "Seoul Trail: Daemo-Guryong / 서울둘레길: 대모-구룡/Seoul Trail: Daemo-Guryong",
    "Seoul Trail: Umyeonsan / 서울둘레길: 우면산/Seoul Trail: Umyeonsan",
    "진옥자전거캠프-남문_수어장대byHS",
    "UTKC_관악산왕복버티컬레이스",
    "진옥자전거캠프-아차산입구_고구려정삼거리byHS",
    "KoreaFKT_광청(H)",
    "버프챌린지 강남칠산청광종주32k",
    "Daemo-Guryong Ridge / 대모-구룡/Daemo-Guryong Ridge",
    "진옥자전거캠프-관악산(남현동등산로입구-1전망대)(JOBC)",
    "Scale up",
    "쉬는시간 달려1",
    "영동2교-영동3교 (시계방향)",
    "DMC > 응암역",
    "1바퀴 400M_목동운동장주경기장트랙",
    "Dongjak Bridge (East Side)",
    "한남대교 (뿍 > 남) Hannam Bridge (southbound)",
    "수서-탄천(성남방향)",
    "circuit 250 m",
    "여의도공원 산책로 트랙",
    "웃자코스",
    "Olympic Stadium to Seongsu Bridge",
    "땅콩연못 정방향",
    "[처음처런] 질주 구간",
    "성내천 서편 오픈구간",
    "2024 서울마라톤 10k",
    "장암대교 -> 상도교 (중랑천 서쪽)",
    "반포대교 (북쪽)",
    "순대타운",
    "여의도 8.2km",
    "[hirun]우장산 축구장트랙",
    "400m인터벌(거리공원오거리방향)",
    "JTBC 서울마라톤 Full",
    "[러닝1.3K] 구로1교 ->도림천오거리",
    "평화의 광장 740m T",
    "월드컵로",
    "호암교-호장교",
    "목감천 4.1km (개봉->스피돔)",
    "Mokdonggyo - Yangpyeonggyo",
    "탄천합수부-종합운동장나들목 by 마부작침",
    "아차산배수지체육공원(스타트런)",
    "보라매후문~1km구간",
    "SF 10km Finish",
    "파란이정표->잠원나들목 횡단보도/파란색 한강 이정표) / 잠달(한남대교 스프린트) 한남->반포 방향(한남대교 엘리베이터 옆/파란이정표->잠원나들목 횡단보도/파란색 한강 이정표)",
    "박물관 부터 다리앞 까지 JS1",
    "OhgeumGyo - Foot Bridge",
    "Cheonggyecheon",
    "우이천 근화교(덕성여대 앞) ~ 우이교",
    "탄천~CU 5km",
    "canal upstream",
    "Dongjak Bridge to Hangang Bridge - South",
    "신대방역-대림역",
    "banpo to ichon",
    "Bake the Snake",
    "종합운동장 400m",
    "Hongdae walking path",
    "양천공원 둘레코스 by Derrick",
    "IrwonEcoPark Small Loop J.K",
    "보라매공원 크게 1회전 by DAVID",
    "성북천 (청계천 - 보문3교)",
    "Shinjeong Track Loop",
    "동호대교 1k tt 북to남by min",
    "미즈노 릴레이 2019",
    "Yulgok Tunnel",
    "서울식물원(CW#02)",
    "석촌고분공원(반시계방향)",
    "0.4 km Run Segment in Seongdong-gu, Seoul, South Korea on Strava",
    "휴먼링 서-동(반시계방향)",
    "월드컵경기장-홍제천합수부",
    "gate to Samgakji",
    "서울식물원 습지원(CW#01)",
    "Seoul Botanic Park exit tunnel to Gongamnaru Park",
    "Seoul 10ker - Last K in the Park",
    "2.2 km Run Segment in Yeongdeungpo-gu, Seoul, South Korea on Strava",
    "2024 국제국민마라톤 10km",
    "건국에이스- K 코스",
    "Han: Daeheung to Hapjeong",
    "올림픽대교(남단) -> 천호대교(남단)",
    "seoul race 2022 for 10km",
    "잠원트랙-반포대교",
    "Olympic Park 2500m loop",
    "Mokdong uphill",
    "Misa Boatrace Park",
    "도마코스-아라달",
    "Riverside to Hannam",
    "대방공원트랙_JH",
    "여마클 피날레",
    "Olympic Stadium to Jamsil Bridge",
    "녹두-보라매공원 도림천 Stride 2.8K",
    "MWC_정기런_스프린트_코스",
    "Seoul Forest Bridge",
    "염강나들목~안합",
    "Season Open Half Marathon 2018",
    "4KM stride",
]

import pandas as pd
import os
from langchain_openai import ChatOpenAI
from langchain.schema import SystemMessage, HumanMessage

# OpenAI API 키 설정
os.environ["OPENAI_API_KEY"] = "your_api_key"
# LLM 초기화
llm = ChatOpenAI(model="gpt-4", openai_api_key=os.environ["OPENAI_API_KEY"])

# 페르소나
persona = """
당신은 러닝 및 사이클링 경로에 맞는 이름을 만드는 전문가입니다. 
각 경로의 특성을 고려하여 짧고 매력적인 이름과, 해당 경로의 분위기 또는 도전을 표현하는 간단한 설명을 만드세요.
모든 출력은 한국어로 작성하며, 실질적이고 직관적이어야 하고 한국인들이 생각하기에 말이 되는 말로 이름을 지어야 합니다.
자전거라고 하지 말고 달리기 코스나 러닝 코스라고 명명해주세요.
"""

# 템플릿
template_instructions = """
다음은 러닝 경로 목록입니다. 각 경로에 대해 적합한 간단하고 매력적인 이름을 짓고, 해당 경로의 특성을 표현하는 짧은 설명을 추가하세요.

입력 경로:
{routes}

출력 형식:
1. 원본: <원본 이름>
   새 이름: <새로운 이름 - 짧은 설명>

예시:
1. 원본: "경복궁_시계방향[2.6km]"
   새 이름: "경복궁 러닝 - 고요한 아침의 평화로운 러닝 코스"

2. 원본: "Cycling trail to COEX"
   새 이름: "COEX 러닝길 - 도심 속 활력을 느낄 수 있는 길"

이제 다음 경로들에 대해 이름과 설명을 작성하세요:
"""

# 배치 처리 함수
def generate_course_names_in_batches(course_data, persona, template_instructions, batch_size=10):
    new_names = []
    for i in range(0, len(course_data), batch_size):
        batch = course_data[i:i + batch_size]
        batch_prompt = template_instructions.format(routes="\n".join(batch))
        messages = [
            SystemMessage(content=persona),
            HumanMessage(content=batch_prompt)
        ]
        try:
            response = llm(messages=messages)
            if response:
                new_names.extend(response.content.split("\n"))  # 응답 분리
            else:
                print(f"응답이 비어있습니다: {batch}")
        except Exception as e:
            print(f"Error during LLM processing: {e}")
            new_names.extend([f"Error: {batch_name}" for batch_name in batch])
    return new_names

batch_size = 7
results = generate_course_names_in_batches(course_data, persona, template_instructions, batch_size)


